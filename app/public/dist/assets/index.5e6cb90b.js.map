{"version":3,"file":"index.5e6cb90b.js","sources":["../../src/store/index.js","../../src/store/modules/user.js","../../src/services/LocalStorageService.js","../../src/services/AppStorageService.js","../../src/utils/request.js","../../src/views/home.vue","../../src/router/index.js","../../src/utils/setRem.js","../../src/main.js"],"sourcesContent":["import { createStore, createLogger } from 'vuex'\r\nimport user from './modules/user'\r\n\r\nconst debug = process.env.NODE_ENV !== 'production'\r\n\r\nexport default createStore({\r\n  modules: {\r\n    user,\r\n  },\r\n  strict: debug,\r\n  plugins: debug ? [createLogger()] : []\r\n})","// initial state\r\nconst state = () => ({\r\n  userToken: null,\r\n  userInfo:null \r\n})\r\n\r\n// getters\r\nconst getters = {\r\n    userInfo: (state, getters) => {\r\n      \r\n        return state.userInfo\r\n    },\r\n    userToken: (state, getters) => {\r\n        return state.userToken\r\n   }\r\n}\r\n\r\n// actions\r\nconst actions = {\r\n  async saveUser ({ commit, state }, userInfo) {\r\n    commit('setUserToken', userInfo.token)\r\n    commit('setUserInfo', userInfo)\r\n  },\r\n}\r\n\r\n// mutations\r\nconst mutations = {\r\n  setUserToken (state, userToken) {\r\n    state.userToken = userToken\r\n  },\r\n  setUserInfo (state, userInfo) {\r\n    state.userInfo = userInfo\r\n  }\r\n}\r\n\r\nexport default {\r\n // namespaced: true,\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations,\r\n}","export const LocalStorageService = {\r\n  /**\r\n   * Get an item from LocalStorage\r\n   * Allows saving any JSON data\r\n   * @param {String} key - Key to retrieve data by\r\n   * @param {*} [fallback] - a fallback value if key is not found\r\n   * @return {*}\r\n   */\r\n  getItem (key, fallback) {\r\n    try {\r\n      let item = window.localStorage.getItem(key)\r\n      return item ? window.JSON.parse(item) : fallback\r\n    } catch (err) {\r\n      return fallback\r\n    }\r\n  },\r\n  /**\r\n   * Sets an item by its key\r\n   * @param {String} key - Key to save by\r\n   * @param {*} value - Value to save. Transforms to a JSON string\r\n   */\r\n  setItem (key, value = {}) {\r\n    window.localStorage.setItem(key, window.JSON.stringify(value))\r\n  },\r\n  /**\r\n   * Remove item by its key\r\n   * @param {string} key\r\n   */\r\n  removeItem (key) {\r\n    window.localStorage.removeItem(key)\r\n  },\r\n  /**\r\n   * Removes all items from storage\r\n   */\r\n  clearAllItems () {\r\n    window.localStorage.clear()\r\n  }\r\n}","import { LocalStorageService } from './LocalStorageService'\r\n\r\nexport const KEY_API_URL = 'API_URL'\r\nexport const KEY_CORP_ID = 'CORP_ID'\r\nexport const KEY_AGENT_ID = 'AGENT_ID'\r\nexport const KEY_AGENT_SECRET = 'SECRET_ID'\r\n\r\n\r\nexport const AppService = {\r\n\r\n  /**\r\n   * @param {Note[]} items\r\n   */\r\n  storeApiUrl (apiUrl) {\r\n    LocalStorageService.setItem(KEY_API_URL, apiUrl)\r\n  },\r\n\r\n  /**\r\n   * Fetch  By Id\r\n   */\r\n  getApiUrl () {\r\n    return LocalStorageService.getItem(KEY_API_URL,'')\r\n  },\r\n  \r\n  /**\r\n * @param {Note[]} items\r\n */\r\n  storeCorpId (corpId) {\r\n    LocalStorageService.setItem(KEY_CORP_ID, corpId)\r\n  },\r\n\r\n  /**\r\n   * Fetch  By Id\r\n   */\r\n  getCorpId () {\r\n    return LocalStorageService.getItem(KEY_CORP_ID,'')\r\n  },\r\n\r\n\r\n  /**\r\n * @param {Note[]} items\r\n */\r\n   storeAgentId (corpId) {\r\n    LocalStorageService.setItem(KEY_AGENT_ID, corpId)\r\n  },\r\n\r\n  /**\r\n   * Fetch  By Id\r\n   */\r\n  getAgentId () {\r\n    return LocalStorageService.getItem(KEY_AGENT_ID,'')\r\n  },\r\n\r\n\r\n  /**\r\n * @param {Note[]} items\r\n */\r\n   storeAgentSecret (corpId) {\r\n    LocalStorageService.setItem(KEY_AGENT_SECRET, corpId)\r\n  },\r\n\r\n  /**\r\n   * Fetch  By Id\r\n   */\r\n  getAgentSecret () {\r\n    return LocalStorageService.getItem(KEY_AGENT_SECRET,'')\r\n  },\r\n}","import axios from 'axios'\r\nimport store from '../store'\r\nimport router from '../router'\r\nimport { AppService } from '../services/AppStorageService'\r\n\r\nlet corpId =  AppService.getCorpId() == '' ?  import.meta.env.VITE_CORP_ID   :  AppService.getCorpId() \r\nlet apiUrl =  AppService.getApiUrl() == '' ?   import.meta.env.VITE_API_URL :  AppService.getApiUrl() \r\n// import.meta.env.VITE_API_URL=>默认解析的是env文件\r\n// 创建axios实例\r\nconst service = axios.create({\r\n  baseURL: '/api', // api的base_url\r\n  timeout: 15000, // 请求超时时间\r\n  withCredentials: false,\r\n})\r\n\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n  \r\n  // if(!config.data.hasOwnProperty('user_token')){\r\n  //   config.data['user_token'] = userName\r\n  // }\r\n\r\n  // if(store.getters.user_token){\r\n  //   if(config.method==\"post\"){\r\n  //     if(!config.data.hasOwnProperty('user_token')){\r\n  //         config.data['user_token'] = companyId \r\n  //     }\r\n  //   }\r\n  // }\r\n  \r\n  if(config.method==\"post\"){\r\n    if(config.data instanceof FormData){\r\n      config.data.append('corp_id',corpId);\r\n    }\r\n    config.data['corp_id'] = corpId;\r\n  }else{\r\n    config.params['corp_id'] = corpId;\r\n  }\r\n console.log(config);\r\n  return config\r\n  \r\n}, error => {\r\n  // Do something with request error\r\n  console.log(error) // for debug\r\n  Promise.reject(error)\r\n})\r\n\r\n// respone拦截器\r\nservice.interceptors.response.use(\r\n  response => {\r\n    const res = response.data\r\n    if (res.code !== 0) {\r\n      return Promise.reject(res)\r\n    }\r\n    return res\r\n  },\r\n  error => {\r\n    console.log('无法连接服务器')\r\n    console.log('err' + error)// for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n","<template>\r\n  <div class=\"Dynamic_code\">\r\n    <div class=\"code_box\">\r\n      <h3>用于登录RoboGo高级参数修改功能</h3>\r\n      <div class=\"field-box\">\r\n        <span class=\"cell__title\">随机ID</span>\r\n\r\n        <input type=\"text\" class=\"cell__value\" placeholder=\"请输入随机ID\" v-model=\"randomCode\" />\r\n      </div>\r\n      <div class=\"field-box\">\r\n        <div class=\"cell__title\">动态密码</div>\r\n\r\n        <input type=\"text\" class=\"cell__value\" placeholder=\"请输入动态密码\" />\r\n\r\n        <button class=\"btn\" @click=\"getCode\">\r\n          <div class=\"btn-content\">\r\n            <span class=\"btn-text\">点击获取</span>\r\n          </div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs, onMounted } from \"vue\";\r\nimport { getCode } from \"@/api/user\";\r\nimport { jsSign, jsAgentSign } from '../api/jssdk'\r\nexport default {\r\n  setup() {\r\n    const state = reactive({\r\n      randomCode: \"\",\r\n      dynamicCode: \"\",\r\n    });\r\n    const getCode = () => {\r\n      state.randomCode &&\r\n        getCode(state.randomCode).then((res) => {\r\n          // 获取动态码\r\n          state.dynamicCode = res.data.dynamicCode;\r\n        });\r\n    };\r\n    const getJsSign = () => {\r\n      const url = window.location.href.split('#')[0]\r\n      const params = { 'url': url }\r\n      jsSign(params).then(() => {\r\n        //获取签名\r\n        wx.config({\r\n          beta: true,// 必须这么写，否则wx.invoke调用形式的jsapi会有问题\r\n          debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n          appId: res.data.appId, // 必填，企业微信的corpID\r\n          timestamp: res.data.timestamp, // 必填，生成签名的时间戳\r\n          nonceStr: res.data.nonceStr, // 必填，生成签名的随机串\r\n          signature: res.data.signature,// 必填，签名，见 附录-JS-SDK使用权限签名算法\r\n          jsApiList: ['openUserProfile', 'selectEnterpriseContact', 'chooseImage', 'scanQRCode', 'shareWechatMessage'] // 必填，需要使用的JS接口列表，凡是要调用的接口都需要传进来\r\n\r\n        });\r\n        wx.ready(function(){\r\n          wx.checkJsApi({\r\n               jsApiList: ['selectEnterpriseContact','selectExternalContact','chooseImage','scanQRCode','shareWechatMessage'], // 需要检测的JS接口列表，所有JS接口列表见附录2,\r\n               success: function(res) {\r\n                  console.log(res)\r\n                  // 以键值对的形式返回，可用的api值true，不可用为false\r\n                  // 如：{\"checkResult\":{\"chooseImage\":true},\"errMsg\":\"checkJsApi:ok\"}\r\n               }\r\n            });\r\n        })\r\n        wx.error(function(res){\r\n           console.log(res)\r\n            // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\r\n         });\r\n      })\r\n\r\n    }\r\n    onMounted(() => {\r\n\r\n    })\r\n    return {\r\n      ...toRefs(state),\r\n      getCode,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.Dynamic_code {\r\n  padding: .5rem .4rem;\r\n  box-sizing: border-box;\r\n\r\n  .code_box {\r\n    h3 {\r\n      font-size: 0.4rem;\r\n      padding-bottom: .6rem;\r\n      text-align: center;\r\n    }\r\n\r\n    .field-box {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 0.3rem;\r\n\r\n      .cell__title {\r\n        font-size: 0.3rem;\r\n        width: 18%;\r\n        display: inline-block;\r\n        text-align: right;\r\n      }\r\n\r\n      .cell__value {\r\n        width: 55%;\r\n        margin-left: 0.2rem;\r\n      }\r\n\r\n      .btn {\r\n        font-size: 0.3rem;\r\n        background: rgb(114, 50, 221);\r\n        border-color: rgb(114, 50, 221);\r\n        position: relative;\r\n        display: inline-block;\r\n        box-sizing: border-box;\r\n        height: .7rem;\r\n        margin: 0;\r\n        line-height: 1.2;\r\n        padding: 0;\r\n        width: 21%;\r\n        margin-left: 0.1rem;\r\n        text-align: center;\r\n        border-radius: 2px;\r\n        cursor: pointer;\r\n        -webkit-transition: opacity 0.2s;\r\n        transition: opacity 0.2s;\r\n        -webkit-appearance: none;\r\n      }\r\n\r\n      .btn::before {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #000;\r\n        border: inherit;\r\n        border-color: #000;\r\n        border-radius: inherit;\r\n        -webkit-transform: translate(-50%, -50%);\r\n        transform: translate(-50%, -50%);\r\n        opacity: 0;\r\n        content: \" \";\r\n      }\r\n\r\n      .btn-content {\r\n        display: flex;\r\n        -webkit-box-align: center;\r\n        -webkit-align-items: center;\r\n        align-items: center;\r\n        -webkit-box-pack: center;\r\n        -webkit-justify-content: center;\r\n        justify-content: center;\r\n        height: 100%;\r\n\r\n        .btn-text {\r\n          color: white;\r\n        }\r\n      }\r\n\r\n      .btn-content::before {\r\n        content: \" \";\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\ninput {\r\n  outline-style: none;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  padding: 0.2rem;\r\n  width: 100%;\r\n  font-size: 0.3rem;\r\n  font-family: \"Microsoft soft\";\r\n  display: inline-block;\r\n  min-height: 0.6rem;\r\n  box-sizing: border-box;\r\n}\r\n\r\ninput:focus {\r\n  border-color: #66afe9;\r\n  outline: 0;\r\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),\r\n    0 0 8px rgba(102, 175, 233, 0.6);\r\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075),\r\n    0 0 8px rgba(102, 175, 233, 0.6);\r\n}\r\n</style>\r\n","import {createRouter,createWebHashHistory} from 'vue-router'\r\nimport home from '../views/home.vue'\r\n// 不重定向白名单\r\nconst noUserWhiteList = [];\r\nwindow.history.replaceState(null, null, window.location.pathname);\r\n\r\n//路由\r\nconst routes = [\r\n  { \r\n    path: '/', \r\n    component:home  ,\r\n    name: 'home',\r\n    meta: { title: '动态码' },\r\n    \r\n   }\r\n]\r\n\r\nconst router = createRouter({\r\n  // 4. 内部提供了 history 模式的实现。为了简单起见，我们在这里使用 hash 模式。\r\n  history: createWebHashHistory(),\r\n  routes, // `routes: routes` 的缩写\r\n})\r\n\r\n\r\n//守卫\r\nrouter.beforeEach((to, from, next) => {\r\n    let topath = to.path\r\n    next()\r\n})\r\n\r\nexport default router;","(function () {\r\n  document.addEventListener(\r\n    \"DOMContentLoaded\",\r\n    function () {\r\n      var deviceWidth = document.documentElement.clientWidth;\r\n      console.log(deviceWidth, \"deviceWidth\");\r\n      document.documentElement.style.fontSize = deviceWidth / 10 + \"px\";\r\n    },\r\n    false\r\n  );\r\n\r\n  window.onresize = function () {\r\n    var deviceWidth = document.documentElement.clientWidth;\r\n\r\n    document.documentElement.style.fontSize = deviceWidth / 10 + \"px\";\r\n  };\r\n})();\r\n\r\n\r\n\r\n// (function init(screenRatioByDesign = 16 / 9) {\r\n//    let docEle = document.documentElement\r\n//    function setHtmlFontSize() {\r\n//      var screenRatio = docEle.clientWidth / docEle.clientHeight;\r\n//      var fontSize = (\r\n//        screenRatio > screenRatioByDesign\r\n//          ? (screenRatioByDesign / screenRatio)\r\n//          : 1\r\n//      ) * docEle.clientWidth / 10;\r\n//      docEle.style.fontSize = fontSize.toFixed(3) + \"px\";\r\n//      console.log(docEle.style.fontSize);\r\n//    }\r\n//  ​\r\n//    setHtmlFontSize()\r\n//  ​\r\n//    window.addEventListener('resize', setHtmlFontSize)\r\n//  })()\r\n \r\n \r\n","import { createApp } from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\n//import store from \"./store\";\r\nimport \"@/assets/scss/reset.scss\";\r\n//import { getUserSearchParams,get_redirect_uri } from \"@/utils/index\";\r\nimport { postUserId } from \"@/api/user.js\";\r\nimport { AppService } from '@/services/AppStorageService.js'\r\nimport './utils/setRem.js'\r\nimport VConsole from 'vconsole';\r\n\r\n// 或者使用配置参数来初始化，详情见文档\r\nconst vConsole = new VConsole();\r\nasync function bootstrap() {\r\n  const app = createApp(App);\r\n  app.use(router);\r\n // app.use(store);\r\n  app.mount(\"#app\");\r\n}\r\n\r\n\r\n//const appid = AppService.getCorpId() === '' ? import.meta.env.VITE_CORP_ID : AppService.getCorpId()\r\n\r\n// const redirect_uri = encodeURIComponent(get_redirect_uri())\r\n// console.log(redirect_uri)\r\n// const AuthUrl = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appid}&redirect_uri=${redirect_uri}&response_type=code&scope=snsapi_privateinfo&state=STATE&agentid=1000002#wechat_redirect`;\r\n// const code = getUserSearchParams(\"code\");\r\n// console.log(code,\"code\")\r\n\r\n//if (code) {\r\n  \r\n  // 说明此时已经获取到code\r\n  // 发送code给后端 获取用户的详细信息\r\n  // postUserId({code}).then(() => {\r\n  //   // 接口获取成功后才能初始化项目\r\n   \r\n  //  // window.location.href = `${window.location.origin}${window.location.pathname}/${window.location.hash}`\r\n  // }).catch(()=> {\r\n  //   // 没有授权\r\n  //   console.log('没有授权')\r\n  // })\r\n//} else {\r\n //console.log('isload')\r\n // 说明此时第一次进入还没有跳转回调地址\r\n //window.location.href = AuthUrl\r\n//}\r\nvoid bootstrap();\r\n\r\n  "],"names":["createStore","modules","user","state","userToken","userInfo","getters","state2","getters2","actions","commit","token","mutations","setUserToken","setUserInfo","strict","plugins","LocalStorageService","getItem","key","fallback","item","window","localStorage","JSON","parse","err","setItem","value","stringify","removeItem","clearAllItems","clear","AppService","storeApiUrl","apiUrl","getApiUrl","storeCorpId","corpId2","getCorpId","storeAgentId","getAgentId","storeAgentSecret","getAgentSecret","corpId","service","axios","create","baseURL","timeout","withCredentials","interceptors","request","use","config","method","data","FormData","append","params","log","error","reject","response","res","code","Promise","setup","reactive","randomCode","dynamicCode","getCode","then","toRefs","class","_hoisted_8","type","_createBlock","_hoisted_3","_hoisted_7","history","replaceState","location","pathname","routes","path","component","home","name","meta","title","router","createRouter","createWebHashHistory","beforeEach","to","from","next","addEventListener","deviceWidth","document","documentElement","clientWidth","style","fontSize","onresize","VConsole","async","app","createApp","App","mount","bootstrap"],"mappings":"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"}